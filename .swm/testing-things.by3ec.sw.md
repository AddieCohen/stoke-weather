---
id: by3ec
name: testing things
file_version: 1.0.2
app_version: 0.7.4-0
file_blobs:
  src/features/weather-data/weather-middleware.ts: a39509cba45281af4e80130c91abc6a733b6c967
  src/features/weather-data/weather-api.ts: 9564fdadc897f81bd5b42a739ee00155d7c46e21
---

`response`[<sup id="Z1ltc5p">â†“</sup>](#f-Z1ltc5p)

<br/>

`getWeatherMiddleware`[<sup id="XDFRU">â†“</sup>](#f-XDFRU) sdfsdg
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/features/weather-data/weather-middleware.ts
```typescript
â¬œ 4      
â¬œ 5      export const getWeatherMiddleware = (storeApi: any) => (next: Function) => async (action: any) => {
â¬œ 6          if (action.type === 'weatherData/setPosition') {
ðŸŸ© 7              const response = await fetchWeather(action.payload) as any
ðŸŸ© 8              if (response || action) {
ðŸŸ© 9                  console.log("ahhh");
ðŸŸ© 10             }
â¬œ 11             if (!!response.cod && response.cod !== 200) {
â¬œ 12                 storeApi.dispatch(setMessage(response.message));
â¬œ 13             } else {
```

<br/>

`cityName`[<sup id="Z1IRqmA">â†“</sup>](#f-Z1IRqmA) sdlfs;dlfks;f
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/features/weather-data/weather-api.ts
```typescript
â¬œ 4      const API_PATH = `https://api.openweathermap.org/data/2.5/`;
â¬œ 5      const PATH_END = `&appid=${API_KEY}&units=metric`;
â¬œ 6      
ðŸŸ© 7      export function fetchPosition(cityName: string): Promise<string> {
ðŸŸ© 8          return fetch(`${API_PATH}weather?q=${cityName.trim()}${PATH_END}`)
ðŸŸ© 9              .then(value => value.json())
ðŸŸ© 10     }
â¬œ 11     
â¬œ 12     export function fetchWeather(position: Position): Promise<string> {
â¬œ 13         return fetch(`${API_PATH}onecall?lat=${position.lat}&lon=${position.long}${PATH_END}`)
```

<br/>

<!-- THIS IS AN AUTOGENERATED SECTION. DO NOT EDIT THIS SECTION DIRECTLY -->
### Swimm Note

<span id="f-Z1IRqmA">cityName</span>[^](#Z1IRqmA) - "src/features/weather-data/weather-api.ts" L7
```typescript
export function fetchPosition(cityName: string): Promise<string> {
```

<span id="f-XDFRU">getWeatherMiddleware</span>[^](#XDFRU) - "src/features/weather-data/weather-middleware.ts" L5
```typescript
export const getWeatherMiddleware = (storeApi: any) => (next: Function) => async (action: any) => {
```

<span id="f-Z1ltc5p">response</span>[^](#Z1ltc5p) - "src/features/weather-data/weather-middleware.ts" L7
```typescript
        const response = await fetchWeather(action.payload) as any
```

<br/>

This file was generated by Swimm. [Click here to view it in the app](http://localhost:5000/repos/Z2l0aHViJTNBJTNBc3Rva2Utd2VhdGhlciUzQSUzQUFkZGllQ29oZW4=/docs/by3ec).